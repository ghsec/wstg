# Тестовая конфигурация сетевой инфраструктуры

|ID          |
|------------|
|WSTG-CONF-01|

## Резюме

Внутренняя сложность взаимосвязанной и гетерогенной инфраструктуры веб-сервера, которая может включать сотни веб-приложений, делает управление конфигурацией и анализ фундаментальным шагом в тестировании и развертывании каждого отдельного приложения. Требуется только одна уязвимость, чтобы подорвать безопасность всей инфраструктуры, и даже небольшие и, казалось бы, неважные проблемы могут перерасти в серьезные риски для другого приложения на том же сервере. Для решения этих проблем крайне важно провести углубленный анализ конфигурации и известных проблем безопасности после сопоставления всей архитектуры.

Правильное управление конфигурацией инфраструктуры веб-сервера очень важно для сохранения безопасности самого приложения. Если такие элементы, как программное обеспечение веб-сервера, серверы базы данных бэк-энда или серверы аутентификации, не будут должным образом проверены и защищены, они могут создать нежелательные риски или ввести новые уязвимости, которые могут поставить под угрозу само приложение.

Например, уязвимость веб-сервера, которая позволит удаленному злоумышленнику раскрыть исходный код самого приложения (уязвимость, которая возникала несколько раз как на веб-серверах, так и на серверах приложений) может поставить под угрозу приложение, анонимные пользователи могут использовать информацию, раскрытую в исходном коде, для проведения атак на приложение или его пользователей.

Для проверки инфраструктуры управления конфигурацией необходимо предпринять следующие шаги:

- Различные элементы, составляющие инфраструктуру, должны быть определены, чтобы понять, как они взаимодействуют с веб-приложением и как они влияют на его безопасность.
- Все элементы инфраструктуры должны быть пересмотрены, чтобы убедиться, что они не содержат известных уязвимостей.
- Необходимо пересмотреть административные инструменты, используемые для поддержания всех различных элементов.
- Системы аутентификации должны быть пересмотрены, чтобы гарантировать, что они удовлетворяют потребности приложения и что внешние пользователи не могут манипулировать ими для обеспечения доступа.
- Список определенных портов, которые требуются для приложения, должен поддерживаться и храниться под контролем изменений.

После сопоставления различных элементов, составляющих инфраструктуру (см [Map Network and Application Architecture](../01-Information_Gathering/10-Map_Application_Architecture.md)) можно проверить конфигурацию каждого основанного элемента и проверить наличие известных уязвимостей.

## Цели теста

- Просмотрите конфигурации приложений, установленные в сети, и подтвердите, что они не уязвимы.
- Убедитесь, что используемые фреймворки и системы безопасны и не подвержены известным уязвимостям из-за неподдерживаемого программного обеспечения или настроек и учетных данных по умолчанию.

## Как проверить

### Известные уязвимости сервера

Уязвимости, обнаруженные в различных областях архитектуры приложения, будь то на веб-сервере или в базе данных бэк-энда, могут серьезно подорвать само приложение. Например, рассмотрим уязвимость сервера, которая позволяет удаленному, не аутентифицированному пользователю загружать файлы на веб-сервер или даже заменять файлы. Эта уязвимость может поставить под угрозу приложение, поскольку мошеннический пользователь может заменить само приложение или ввести код, который повлияет на серверы бэк-энда, поскольку его код приложения будет работать так же, как и любое другое приложение.

Проверка уязвимостей сервера может быть затруднена, если тест необходимо выполнить с помощью теста слепого проникновения. В этих случаях уязвимости необходимо тестировать с удаленного сайта, обычно с помощью автоматизированного инструмента. Однако тестирование на некоторые уязвимости может иметь непредсказуемые результаты на веб-сервере, а тестирование на другие (например, те, которые непосредственно участвуют в атаках типа «отказ в обслуживании») может быть невозможным из-за простоя службы, если тест прошел успешно.

Некоторые автоматизированные инструменты будут помечать уязвимости на основе полученной версии веб-сервера. Это приводит как к ложным позитивам, так и к ложным негативам. С одной стороны, если версия веб-сервера была удалена или скрыта администратором локального сайта, инструмент сканирования не будет помечать сервер как уязвимый, даже если это так. С другой стороны, если поставщик, предоставляющий программное обеспечение, не обновляет версию веб-сервера, когда уязвимости исправлены, инструмент сканирования будет отмечать несуществующие уязвимости. Последний случай на самом деле очень распространен, поскольку некоторые поставщики операционных систем поддерживают исправления уязвимостей безопасности для программного обеспечения, которое они предоставляют в операционной системе, но не выполняют полную загрузку до последней версии программного обеспечения. Это происходит в большинстве дистрибутивов GNU / Linux, таких как Debian, Красная Шапка или SuSE. В большинстве случаев, Сканирование уязвимостей архитектуры приложения позволит обнаружить только уязвимости, связанные с «экспонированными» элементами архитектуры (например, веб-сервер) и обычно не сможет найти уязвимости, связанные с элементами, которые не подвергаются непосредственному воздействию, такие как обратная связь аутентификации, бэкэнд база данных, или обратные прокси в использовании.

Наконец, не все поставщики программного обеспечения публично раскрывают уязвимости, и поэтому эти недостатки не регистрируются в общедоступных базах данных об уязвимостях [2]. Эта информация раскрывается только клиентам или публикуется с помощью исправлений, которые не содержат сопроводительных рекомендаций. Это снижает полезность инструментов сканирования уязвимостей. Как правило, покрытие уязвимости этих инструментов будет очень хорошим для обычных продуктов (таких как веб-сервер Apache, информационный сервер Microsoft в Интернете или Lotus Domino IBM), но будет отсутствовать для менее известных продуктов.

Вот почему проверка уязвимостей лучше всего выполняется, когда тестеру предоставляется внутренняя информация об используемом программном обеспечении, включая используемые версии и релизы, а также исправления, применяемые к программному обеспечению. С помощью этой информации тестер может извлекать информацию из самого поставщика и анализировать, какие уязвимости могут присутствовать в архитектуре и как они могут влиять на само приложение. По возможности эти уязвимости могут быть проверены для определения их реальных эффектов и для определения того, могут ли существовать какие-либо внешние элементы (такие как системы обнаружения вторжений или предотвращения), которые могут уменьшить или свести на нет возможность успешной эксплуатации. Тестеры могут даже определить с помощью обзора конфигурации, что уязвимость даже отсутствует, поскольку она влияет на программный компонент, который не используется.

Также стоит отметить, что поставщики иногда молча исправляют уязвимости и делают исправления доступными с новыми выпусками программного обеспечения. У разных поставщиков будут разные циклы выпуска, которые определяют поддержку, которую они могут предоставить для более старых выпусков. Тестер с подробной информацией о версиях программного обеспечения, используемых архитектурой, может анализировать риск, связанный с использованием старых выпусков программного обеспечения, которые могут не поддерживаться в краткосрочной перспективе или уже не поддерживаются. Это очень важно, поскольку, если уязвимость возникнет в старой версии программного обеспечения, которая больше не поддерживается, персонал системы может не знать об этом напрямую. Для него никогда не будут доступны исправления, и в рекомендациях может не указываться эта версия как уязвимая, поскольку она больше не поддерживается. Даже в том случае, если они осознают, что уязвимость присутствует и система уязвима, им нужно будет сделать полное обновление до нового программного обеспечения, что может привести к значительному времени простоя в архитектуре приложения или может привести к перекодированию приложения из-за несовместимости с последней версией программного обеспечения.

### Административные инструменты

Любая инфраструктура веб-сервера требует наличия административных инструментов для обслуживания и обновления информации, используемой приложением. Эта информация включает в себя статический контент (веб-страницы, графические файлы), исходный код приложения, базы данных аутентификации пользователя и т. Д. Административные инструменты будут различаться в зависимости от сайта, технологии или используемого программного обеспечения. Например, некоторые веб-серверы будут управляться с использованием административных интерфейсов, которые сами являются веб-серверами (например, веб-сервером iPlanet) или будут администрироваться с помощью файлов конфигурации простого текста (в случае Apache [3]) или использовать операционную систему Инструменты графического интерфейса (при использовании сервера IIS Microsoft или ASP.Net).

В большинстве случаев конфигурация сервера будет обрабатываться с использованием различных инструментов обслуживания файлов, используемых веб-сервером, которые управляются через FTP-серверы, WebDAV, сетевые файловые системы (NFS, CIFS) или другие механизмы. Очевидно, что операционная система элементов, составляющих архитектуру приложения, также будет управляться с использованием других инструментов. Приложения также могут иметь встроенные административные интерфейсы, которые используются для управления данными приложения (пользователями, контентом и т. Д.).).

После сопоставления административных интерфейсов, используемых для управления различными частями архитектуры, важно их просмотреть, поскольку, если злоумышленник получает доступ к любому из них, он может скомпрометировать или повредить архитектуру приложения. Для этого важно:

- Определите механизмы, которые контролируют доступ к этим интерфейсам и связанные с ними восприимчивости. Эта информация может быть доступна онлайн.
- Изменить имя пользователя и пароль по умолчанию.

Некоторые компании предпочитают не управлять всеми аспектами своих приложений на веб-сервере, но могут иметь другие стороны, управляющие контентом, доставляемым веб-приложением. Эта внешняя компания может предоставлять только части контента (обновления новостей или рекламные акции) или может полностью управлять веб-сервером (включая контент и код). В этих ситуациях обычно можно найти административные интерфейсы, доступные из Интернета, поскольку использование Интернета дешевле, чем предоставление выделенной линии, которая будет подключать внешнюю компанию к инфраструктуре приложений через интерфейс только для управления. В этой ситуации очень важно проверить, могут ли административные интерфейсы быть уязвимыми для атак.

## References

- [1] WebSEAL, also known as Tivoli Authentication Manager, is a reverse proxy from IBM which is part of the Tivoli framework.
- [2] Such as Symantec's Bugtraq, ISS' X-Force, or NIST's National Vulnerability Database (NVD).
- [3] There are some GUI-based administration tools for Apache (like NetLoony) but they are not in widespread use yet.
